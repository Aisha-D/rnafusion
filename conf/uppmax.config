/*
vim: syntax=groovy
-*- mode: groovy;-*-
 * -------------------------------------------------
 *  Nextflow config file for UPPMAX (milou / irma)
 * -------------------------------------------------
 * Defines reference files
 * Imported under the default 'standard' Nextflow
 * profile in nextflow.config
 */

process {
  executor = 'slurm'
  cpus = { 1 * task.attempt }
  memory = { 8.GB * task.attempt }
  time = { 2.h * task.attempt }
  clusterOptions = { "-A $params.project ${params.clusterOptions ?: ''}" }
  errorStrategy = { task.exitStatus == 143 ? 'retry' : 'finish' }
  maxRetries = 3
  maxErrors = '-1'

  $fusioncatcher{
    module = ['bioinfo-tools', 'FusionCatcher/0.99.5a']
    cpus = { 16 * task.attempt }
    memory = { 32.GB * task.attempt }
  }
  $star_fusion{
    module = ['bioinfo-tools', 'star-fusion']
    cpus = { 4 * task.attempt }
    memory = { 32.GB * task.attempt }
  }
}

params {
  references{
    params.fusioncatcer_data = '/sw/apps/bioinfo/FusionCatcher/0.99.5a/milou/data/ensembl_v83/'
    params.star_fusion_reference  = '/proj/b2013064/private/nobackup/rickard/STAR_fusion_refrence/GRCh37_gencode_v19_CTAT_lib_July272016_prebuilt'
    params.fusioncatcher_data_dir = '/sw/apps/bioinfo/FusionCatcher/0.99.5a/milou/data/current'
  }
}
